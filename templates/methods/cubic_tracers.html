{% extends 'base.html' %}

{% block content %}
<div id="content">
  <div class="container text-center">
    <div class="row justify-content-center">

      <!-- ==== GRID ARRIBA + ESPACIO A LA DERECHA ==== -->
      <div class="col-12 col-lg-10 mb-3">
        <div class="card p-4">

          <h2>Cubic Tracers</h2>

          <div class="row mt-4 d-flex">

            <!-- GRID DE PUNTOS -->
            <div class="col">
              <label class="form-label fw-bold" style="width: 200px; display: block; text-align: center;">
                Enter your points (X , Y)
              </label>
              <div id="pointsGrid" class="matrix-grid" style="width: 200px;"></div>
            </div>

            <!-- GRÁFICA -->
            <div class="col">
              <label class="form-label fw-bold">Tracers on the graph</label>

              <div id="graph-container"
                   class="border rounded p-4 text-muted"
                   style="height: 350px; width: 100%; background: #fafafa; position: relative;">
              </div>

            </div>

          </div>

          <!-- BOTÓN -->
          <div class="mt-4">
            <button id="solve-btn" class="btn btn-outline-success" type="button">
              Compute Cubic Tracers
            </button>
          </div>

                    <!-- EVALUAR UN PUNTO -->
          <div id = "eval-section" class="mt-3 gap-2" style="display: none;">
            <label for="eval-x" class="form-label mb-0 fw-bold">Evalue in x =</label>
            <input id="eval-x" type="number" step="any" class="form-control form-control-sm" style="width:140px" placeholder="ej. 1.23">
            <button id="eval-btn" class="btn btn-outline-primary btn-sm" type="button">Compute</button>
          
            <div id="eval-result" class="ms-3" style="min-width:220px;">
              <!-- Resultado aparecerá aquí -->
              <span class="text-muted">Input a value and press compute</span>
            </div>
          </div>


          <!-- MENSAJE -->
          <div id="result-message" class="alert mt-3" style="display:none;"></div>

        </div>
      </div>

      <!-- LOGS -->
      <div class="col-12 col-lg-10 mb-3">
        <div class="card p-3" style="height: 60vh; overflow-y: auto;">
          <h4>Tracers</h4>
          <div id="logs-container"></div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- === MATRIX GRID === -->
<script src="/static/js/points_grid.js"></script>

<!-- === TU SCRIPT PRINCIPAL === -->
<script src="/static/js/cubic_tracers.js"></script>

{% endblock %}