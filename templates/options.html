{% extends 'base.html' %}
{% block content %}
<div id="content">
	<div class="container">
		<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 justify-content-center">
			{% for i in function_names %}
			<div class="col">
				<div class="card text-bg-dark shadow-sm">
					<img class="card-img-top animated-img" width="100%" alt="{{ i }}" 
						 src="/static/img/{{ i }}.gif"
						 onerror="tryImageExtensions(this, '{{ i }}', {{ loop.index }})">
					<div class="card-body d-flex flex-column">
						<h5 class="card-title mb-2">{{ i }}</h5>
						<div class="d-flex justify-content-between align-items-center">
							<!-- <p class="card-text flex-grow-1">Descripcion del metodo</p> -->
							<a href="/calculations/{{ i }}" class="btn btn-primary mt-auto">Usar</a>
						</div>
					</div>
				</div>
			</div>
			{% endfor %}
			<a href="javascript:history.back()" class="btn btn-primary btn-lg floating-back-btn" title="Volver atrás">
				← Volver
			</a>
		</div>
	</div>
</div>

<script>
function tryImageExtensions(imgElement, imageName, loopIndex) {
	const extensions = ['png', 'svg', 'jpg', 'jpeg', 'webp'];
	let currentIndex = 0;
	
	function tryNext() {
		if (currentIndex < extensions.length) {
			imgElement.onerror = function() {
				currentIndex++;
				tryNext();
			};
			imgElement.src = `/static/img/${imageName}.${extensions[currentIndex]}`;
		} else {
			// No image found with any extension, use random image
			imgElement.onerror = null; // Remove error handler to avoid infinite loop
			imgElement.src = `/static/img/file.jpeg`;
		}
	}
	
	tryNext();
}
</script>
{% endblock %}